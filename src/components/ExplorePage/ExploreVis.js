import React, { PureComponent } from 'react';
import Popup from 'reactjs-popup';
import '../components.css';
import { BarChart, Bar, XAxis, YAxis, CartesianGrid, Tooltip, Label, LabelList, Treemap, RadialBar, Legend, ResponsiveContainer, PieChart, Pie, Sector, Cell } from 'recharts';

export default function Visualization(props) {
    // const contentStyle = { background: '#FFFFFF' };
    const overlayStyle = { background: 'rgba(0,0,0,0.5)' };
    const arrowStyle = { color: '#000' }; // style for an svg element
    console.log("Imagelist", props.imageList);
    // const sexData = SingleConverter(props.imageList, 'demographic', 'sex');
    const ageData = SingleConverter(props.imageList, 'demographic', 'age');
    // const in_outData = SingleConverter(props.imageList, 'location', 'in_outdoor');
    const densityData = SingleConverter(props.imageList, 'spectators', 'density');
    const quantityData = SingleConverter(props.imageList, 'spectators', 'quantity');
    const siteData = ListConverter(props.imageList, 'location', 'site');
    const postureData = ListConverter(props.imageList, 'posture', 'posture');
    const sexAgeNest = UndefinedMarker(NestedConverter(props.imageList, ageData, 'demographic', 'age', 'sex'));
    const siteArchiNest = JsonConverter(UndefinedMarker(NestedConverter(props.imageList, siteData, 'location', 'site', 'archi_compo', true)));
    const modalityData = ModalityConverter(props.imageList);
    return (
        <Popup trigger={
        <button className="Visbutton">
        Visualization
            <img className="statIcon" src='data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAABgCAYAAADimHc4AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAJPSURBVHgB7dw7TiNBFIXhO6MJZ/YwITEEZgdshD3AEkhI2AsB6yAhJgchUgKoK2gJLEx3PU+V+/+kymZ4nN+0bTCYAQAAAAAAYC1+Wb5Xq/8+9tZvgxQBxAggRgAxAogRQIwAYgQQI0C+TTjnJvQ6c/bZUTiP9v55XpjIWgN8Hn86kghrDPDd+LIIawvw0/iSCD0F2Hycmm//yeY/Zz/N7ph7CTDdMn2gYytvyS1/Ov4x1LwhfNFDgO1xSkfodnxb8AHVtmucUhG6Ht9MG2BunNwI3Y9vpguwdJzUCEOMb6YJEDNOSoRhxjdrHyB2/NgIQ41v1jZA6vhLIww3vmsVIHf8uQhDju9aBCg1/q4Iw47vageIefr/FPlvNwlvv6vxXc0AKePUDtadWgFyLguH4Tws/L9Dj+9qBChxTS4VoevxXekAJe8QcyN0P74rGaDGo5HUCEOM70oFqPlQMDbCMOO7EgFaPA5fGmGo8V1ugJZPguYiDDe+ywmgeAa6K8KQ47vUAMqn/9sRhh3fpQTo4XsvU4Shx3cpAc5NO/6k9stYmki9BJ2Zdvy9kRrA7YrA+BFyArjtCIwfKTeAmyIwfoISAZzfMa9ufP5UgRi/oiRGADECiBFAjABiBBAjgBgBxAggRgAxAogRQIwAYgQQI4AYAcRK/LDkOZx/hknUpiW+Au4NyUoEuDEkK3EJOgjnNpw/Btf8EnQXzpVBym/917bs9Z77fmQ8wmU4LzbeaLIANV6z4/cJp+GchPM/nL+2LrwOCgAAAAAAAAAAfPEGyqDaH6ZOtVIAAAAASUVORK5CYII=' />
        
        </button>}
        {...{ overlayStyle, arrowStyle }} modal>
            <div className='popup-content'>
            <div className='column1'>
            <h5>Postures</h5>
            <ResponsiveContainer width="120%" height="45%">
                <BarChart
                width={500}
                height={300}
                data={postureData}
                margin={{
                    top: 15,
                    right: 30,
                    left: 0,
                    bottom: 15,
                }}
                >
                <CartesianGrid strokeDasharray="3 3" />
                <XAxis dataKey="name" hide='true'>
                    {/* <Label value="Posture Distribution" offset={-10} position="insideBottom" /> */}
                </XAxis>
                <YAxis padding={{ top: 30 }} />
                <Tooltip />
                <Bar dataKey="value" fill="#8884d8">
                    {/* <LabelList dataKey="name" position="top" angle={0} fill='#5A5A5A' /> */}
                </Bar>
                </BarChart>
            </ResponsiveContainer>
            <h5>Gender and Age Groups</h5>
            <ResponsiveContainer width="100%" height="45%">
                <BarChart
                width={500}
                height={300}
                data={sexAgeNest}
                margin={{
                    top: 20,
                    right: 30,
                    left: 0,
                    bottom: 5,
                }}
                >
                <CartesianGrid strokeDasharray="3 3" />
                <XAxis dataKey="name" />
                <YAxis />
                <Tooltip />
                <Legend />
                <Bar dataKey="female" stackId="a" fill="#8884d8" />
                <Bar dataKey="male" stackId="a" fill="#82ca9d" />
                <Bar dataKey="unknown" stackId="a" fill="#ADD8E6" />
                </BarChart>
            </ResponsiveContainer>
            </div>
            <div className='column2'>
            <h5>Spectators</h5>
            <ResponsiveContainer width="100%" height="45%">
                <PieChart>
                <Pie data={quantityData} dataKey="value" nameKey="name" cx="50%" cy="50%" innerRadius={70} outerRadius={90} fill="#82ca9d" label={renderLabel}/>
                <Pie data={densityData} dataKey="value" nameKey="name" cx="50%" cy="50%" outerRadius={60} fill="#8884d8">
                    <LabelList dataKey="name" position="inside" angle={0} fill='#82ca9d' />
                </Pie>
                </PieChart>
            </ResponsiveContainer>
            <h5>Location</h5>
            <ResponsiveContainer width="150%" height="45%">
                <Treemap data={siteArchiNest} dataKey="size" ratio={4 / 3} stroke="#fff" fill="#8884d8" animationDuration='800' content={<CustomizedContent colors={COLORS} />}>
                    <Tooltip content={<CustomTooltip />}/>
                </Treemap>
            </ResponsiveContainer>
            </div>
            <div className='column3'>
            <h5>Modality</h5>
            <ModalityGradient data={modalityData} />
            </div>
            </div>
        </Popup>
    )
}

let renderLabel = function(entry) {
    return entry.name;
}

const ModalityGradient = (data) => {
    return (
        <div className='Human_container'>
        <div className='Human_outline'>
        <svg width="131" height="296" viewBox="0 0 131 296" fill="none" xmlns="http://www.w3.org/2000/svg">
            <rect x="1" y="255.5" width="16" height="16" rx="2" fill="#A0D568"/>
            <path d="M26.7773 261.787V262.73H21.8906V261.787H26.7773ZM26.7773 264.219V265.162H21.8906V264.219H26.7773ZM35.367 266.416V263.152C35.367 262.902 35.3162 262.686 35.2146 262.502C35.117 262.314 34.9685 262.17 34.7693 262.068C34.5701 261.967 34.324 261.916 34.031 261.916C33.7576 261.916 33.5173 261.963 33.3103 262.057C33.1072 262.15 32.947 262.273 32.8298 262.426C32.7166 262.578 32.6599 262.742 32.6599 262.918H31.5759C31.5759 262.691 31.6345 262.467 31.7517 262.244C31.8689 262.021 32.0369 261.82 32.2556 261.641C32.4783 261.457 32.7439 261.312 33.0525 261.207C33.365 261.098 33.7127 261.043 34.0955 261.043C34.5564 261.043 34.9627 261.121 35.3142 261.277C35.6697 261.434 35.947 261.67 36.1462 261.986C36.3494 262.299 36.4509 262.691 36.4509 263.164V266.117C36.4509 266.328 36.4685 266.553 36.5037 266.791C36.5427 267.029 36.5994 267.234 36.6736 267.406V267.5H35.5427C35.488 267.375 35.4451 267.209 35.4138 267.002C35.3826 266.791 35.367 266.596 35.367 266.416ZM35.5545 263.656L35.5662 264.418H34.4705C34.1619 264.418 33.8865 264.443 33.6443 264.494C33.4021 264.541 33.199 264.613 33.0349 264.711C32.8709 264.809 32.7459 264.932 32.6599 265.08C32.574 265.225 32.531 265.395 32.531 265.59C32.531 265.789 32.5759 265.971 32.6658 266.135C32.7556 266.299 32.8904 266.43 33.0701 266.527C33.2537 266.621 33.4783 266.668 33.7439 266.668C34.0759 266.668 34.3689 266.598 34.6228 266.457C34.8767 266.316 35.0779 266.145 35.2263 265.941C35.3787 265.738 35.4607 265.541 35.4724 265.35L35.9353 265.871C35.908 266.035 35.8337 266.217 35.7127 266.416C35.5916 266.615 35.4295 266.807 35.2263 266.99C35.0271 267.17 34.7888 267.32 34.5115 267.441C34.238 267.559 33.9295 267.617 33.5857 267.617C33.156 267.617 32.7791 267.533 32.4548 267.365C32.1345 267.197 31.8845 266.973 31.7048 266.691C31.5291 266.406 31.4412 266.088 31.4412 265.736C31.4412 265.396 31.5076 265.098 31.6404 264.84C31.7732 264.578 31.9646 264.361 32.2146 264.189C32.4646 264.014 32.7654 263.881 33.117 263.791C33.4685 263.701 33.8611 263.656 34.2947 263.656H35.5545ZM40.11 266.521L41.8444 261.16H42.9518L40.6725 267.5H39.9459L40.11 266.521ZM38.6627 261.16L40.4498 266.551L40.5729 267.5H39.8463L37.5495 261.16H38.6627ZM47.7593 266.416V263.152C47.7593 262.902 47.7085 262.686 47.607 262.502C47.5093 262.314 47.3609 262.17 47.1616 262.068C46.9624 261.967 46.7163 261.916 46.4234 261.916C46.1499 261.916 45.9097 261.963 45.7027 262.057C45.4995 262.15 45.3394 262.273 45.2222 262.426C45.1089 262.578 45.0523 262.742 45.0523 262.918H43.9683C43.9683 262.691 44.0269 262.467 44.1441 262.244C44.2612 262.021 44.4292 261.82 44.648 261.641C44.8706 261.457 45.1362 261.312 45.4448 261.207C45.7573 261.098 46.105 261.043 46.4878 261.043C46.9487 261.043 47.355 261.121 47.7066 261.277C48.062 261.434 48.3394 261.67 48.5386 261.986C48.7417 262.299 48.8433 262.691 48.8433 263.164V266.117C48.8433 266.328 48.8609 266.553 48.896 266.791C48.9351 267.029 48.9917 267.234 49.0659 267.406V267.5H47.9351C47.8804 267.375 47.8374 267.209 47.8062 267.002C47.7749 266.791 47.7593 266.596 47.7593 266.416ZM47.9468 263.656L47.9585 264.418H46.8628C46.5542 264.418 46.2788 264.443 46.0366 264.494C45.7945 264.541 45.5913 264.613 45.4273 264.711C45.2632 264.809 45.1382 264.932 45.0523 265.08C44.9663 265.225 44.9234 265.395 44.9234 265.59C44.9234 265.789 44.9683 265.971 45.0581 266.135C45.148 266.299 45.2827 266.43 45.4624 266.527C45.646 266.621 45.8706 266.668 46.1362 266.668C46.4683 266.668 46.7612 266.598 47.0152 266.457C47.2691 266.316 47.4702 266.145 47.6187 265.941C47.771 265.738 47.853 265.541 47.8648 265.35L48.3277 265.871C48.3003 266.035 48.2261 266.217 48.105 266.416C47.9839 266.615 47.8218 266.807 47.6187 266.99C47.4195 267.17 47.1812 267.32 46.9038 267.441C46.6304 267.559 46.3218 267.617 45.978 267.617C45.5484 267.617 45.1714 267.533 44.8472 267.365C44.5269 267.197 44.2769 266.973 44.0972 266.691C43.9214 266.406 43.8335 266.088 43.8335 265.736C43.8335 265.396 43.8999 265.098 44.0327 264.84C44.1655 264.578 44.357 264.361 44.607 264.189C44.857 264.014 45.1577 263.881 45.5093 263.791C45.8609 263.701 46.2534 263.656 46.687 263.656H47.9468ZM51.8461 261.16V267.5H50.7563V261.16H51.8461ZM50.6742 259.479C50.6742 259.303 50.727 259.154 50.8324 259.033C50.9418 258.912 51.102 258.852 51.3129 258.852C51.5199 258.852 51.6781 258.912 51.7875 259.033C51.9008 259.154 51.9574 259.303 51.9574 259.479C51.9574 259.646 51.9008 259.791 51.7875 259.912C51.6781 260.029 51.5199 260.088 51.3129 260.088C51.102 260.088 50.9418 260.029 50.8324 259.912C50.727 259.791 50.6742 259.646 50.6742 259.479ZM54.8841 258.5V267.5H53.7942V258.5H54.8841ZM60.4826 266.416V263.152C60.4826 262.902 60.4318 262.686 60.3302 262.502C60.2326 262.314 60.0841 262.17 59.8849 262.068C59.6857 261.967 59.4396 261.916 59.1466 261.916C58.8732 261.916 58.633 261.963 58.4259 262.057C58.2228 262.15 58.0627 262.273 57.9455 262.426C57.8322 262.578 57.7755 262.742 57.7755 262.918H56.6916C56.6916 262.691 56.7502 262.467 56.8673 262.244C56.9845 262.021 57.1525 261.82 57.3713 261.641C57.5939 261.457 57.8595 261.312 58.1681 261.207C58.4806 261.098 58.8283 261.043 59.2111 261.043C59.672 261.043 60.0783 261.121 60.4298 261.277C60.7853 261.434 61.0627 261.67 61.2619 261.986C61.465 262.299 61.5666 262.691 61.5666 263.164V266.117C61.5666 266.328 61.5841 266.553 61.6193 266.791C61.6584 267.029 61.715 267.234 61.7892 267.406V267.5H60.6584C60.6037 267.375 60.5607 267.209 60.5295 267.002C60.4982 266.791 60.4826 266.596 60.4826 266.416ZM60.6701 263.656L60.6818 264.418H59.5861C59.2775 264.418 59.0021 264.443 58.7599 264.494C58.5177 264.541 58.3146 264.613 58.1505 264.711C57.9865 264.809 57.8615 264.932 57.7755 265.08C57.6896 265.225 57.6466 265.395 57.6466 265.59C57.6466 265.789 57.6916 265.971 57.7814 266.135C57.8713 266.299 58.006 266.43 58.1857 266.527C58.3693 266.621 58.5939 266.668 58.8595 266.668C59.1916 266.668 59.4845 266.598 59.7384 266.457C59.9923 266.316 60.1935 266.145 60.342 265.941C60.4943 265.738 60.5763 265.541 60.588 265.35L61.0509 265.871C61.0236 266.035 60.9494 266.217 60.8283 266.416C60.7072 266.615 60.5451 266.807 60.342 266.99C60.1427 267.17 59.9045 267.32 59.6271 267.441C59.3537 267.559 59.0451 267.617 58.7013 267.617C58.2716 267.617 57.8947 267.533 57.5705 267.365C57.2502 267.197 57.0002 266.973 56.8205 266.691C56.6447 266.406 56.5568 266.088 56.5568 265.736C56.5568 265.396 56.6232 265.098 56.756 264.84C56.8888 264.578 57.0802 264.361 57.3302 264.189C57.5802 264.014 57.881 263.881 58.2326 263.791C58.5841 263.701 58.9767 263.656 59.4103 263.656H60.6701ZM63.3858 258.5H64.4756V266.27L64.3819 267.5H63.3858V258.5ZM68.7588 264.277V264.4C68.7588 264.861 68.7041 265.289 68.5948 265.684C68.4854 266.074 68.3252 266.414 68.1143 266.703C67.9034 266.992 67.6455 267.217 67.3409 267.377C67.0362 267.537 66.6866 267.617 66.292 267.617C65.8897 267.617 65.5362 267.549 65.2315 267.412C64.9307 267.271 64.6768 267.07 64.4698 266.809C64.2627 266.547 64.0967 266.23 63.9717 265.859C63.8506 265.488 63.7666 265.07 63.7198 264.605V264.066C63.7666 263.598 63.8506 263.178 63.9717 262.807C64.0967 262.436 64.2627 262.119 64.4698 261.857C64.6768 261.592 64.9307 261.391 65.2315 261.254C65.5323 261.113 65.8819 261.043 66.2803 261.043C66.6787 261.043 67.0323 261.121 67.3409 261.277C67.6495 261.43 67.9073 261.648 68.1143 261.934C68.3252 262.219 68.4854 262.561 68.5948 262.959C68.7041 263.354 68.7588 263.793 68.7588 264.277ZM67.669 264.4V264.277C67.669 263.961 67.6397 263.664 67.5811 263.387C67.5225 263.105 67.4287 262.859 67.2998 262.648C67.1709 262.434 67.001 262.266 66.7901 262.145C66.5791 262.02 66.3194 261.957 66.0108 261.957C65.7373 261.957 65.4991 262.004 65.2959 262.098C65.0967 262.191 64.9268 262.318 64.7862 262.479C64.6455 262.635 64.5303 262.814 64.4405 263.018C64.3545 263.217 64.2901 263.424 64.2471 263.639V265.051C64.3096 265.324 64.4112 265.588 64.5518 265.842C64.6963 266.092 64.8877 266.297 65.126 266.457C65.3682 266.617 65.667 266.697 66.0225 266.697C66.3155 266.697 66.5655 266.639 66.7725 266.521C66.9834 266.4 67.1534 266.234 67.2823 266.023C67.4151 265.812 67.5127 265.568 67.5752 265.291C67.6377 265.014 67.669 264.717 67.669 264.4ZM71.4277 258.5V267.5H70.3378V258.5H71.4277ZM75.9188 267.617C75.4773 267.617 75.077 267.543 74.7176 267.395C74.3621 267.242 74.0555 267.029 73.7977 266.756C73.5438 266.482 73.3484 266.158 73.2117 265.783C73.075 265.408 73.0066 264.998 73.0066 264.553V264.307C73.0066 263.791 73.0828 263.332 73.2352 262.93C73.3875 262.523 73.5945 262.18 73.8563 261.898C74.118 261.617 74.4148 261.404 74.7469 261.26C75.0789 261.115 75.4227 261.043 75.7781 261.043C76.2313 261.043 76.6219 261.121 76.95 261.277C77.282 261.434 77.5535 261.652 77.7645 261.934C77.9754 262.211 78.1316 262.539 78.2332 262.918C78.3348 263.293 78.3855 263.703 78.3855 264.148V264.635H73.6512V263.75H77.3016V263.668C77.2859 263.387 77.2273 263.113 77.1258 262.848C77.0281 262.582 76.8719 262.363 76.657 262.191C76.4422 262.02 76.1492 261.934 75.7781 261.934C75.532 261.934 75.3055 261.986 75.0984 262.092C74.8914 262.193 74.7137 262.346 74.5652 262.549C74.4168 262.752 74.3016 263 74.2195 263.293C74.1375 263.586 74.0965 263.924 74.0965 264.307V264.553C74.0965 264.854 74.1375 265.137 74.2195 265.402C74.3055 265.664 74.4285 265.895 74.5887 266.094C74.7527 266.293 74.95 266.449 75.1805 266.562C75.4148 266.676 75.6805 266.732 75.9773 266.732C76.3602 266.732 76.6844 266.654 76.95 266.498C77.2156 266.342 77.448 266.133 77.6473 265.871L78.3035 266.393C78.1668 266.6 77.993 266.797 77.782 266.984C77.5711 267.172 77.3113 267.324 77.0027 267.441C76.698 267.559 76.3367 267.617 75.9188 267.617Z" fill="black"/>
            <rect x="1" y="279.5" width="16" height="16" rx="2" fill="#ED5564"/>
            <path d="M26.7773 285.787V286.73H21.8906V285.787H26.7773ZM26.7773 288.219V289.162H21.8906V288.219H26.7773ZM31.3416 288.4V288.266C31.3416 287.809 31.408 287.385 31.5408 286.994C31.6736 286.6 31.865 286.258 32.115 285.969C32.365 285.676 32.6677 285.449 33.0232 285.289C33.3787 285.125 33.7771 285.043 34.2185 285.043C34.6638 285.043 35.0642 285.125 35.4197 285.289C35.7791 285.449 36.0837 285.676 36.3337 285.969C36.5877 286.258 36.781 286.6 36.9138 286.994C37.0466 287.385 37.113 287.809 37.113 288.266V288.4C37.113 288.857 37.0466 289.281 36.9138 289.672C36.781 290.062 36.5877 290.404 36.3337 290.697C36.0837 290.986 35.781 291.213 35.4255 291.377C35.074 291.537 34.6755 291.617 34.2302 291.617C33.7849 291.617 33.3845 291.537 33.0291 291.377C32.6736 291.213 32.3689 290.986 32.115 290.697C31.865 290.404 31.6736 290.062 31.5408 289.672C31.408 289.281 31.3416 288.857 31.3416 288.4ZM32.4255 288.266V288.4C32.4255 288.717 32.4627 289.016 32.5369 289.297C32.6111 289.574 32.7224 289.82 32.8709 290.035C33.0232 290.25 33.2127 290.42 33.4392 290.545C33.6658 290.666 33.9295 290.727 34.2302 290.727C34.5271 290.727 34.7869 290.666 35.0095 290.545C35.2361 290.42 35.4236 290.25 35.572 290.035C35.7205 289.82 35.8318 289.574 35.906 289.297C35.9841 289.016 36.0232 288.717 36.0232 288.4V288.266C36.0232 287.953 35.9841 287.658 35.906 287.381C35.8318 287.1 35.7185 286.852 35.5662 286.637C35.4177 286.418 35.2302 286.246 35.0037 286.121C34.781 285.996 34.5193 285.934 34.2185 285.934C33.9216 285.934 33.6599 285.996 33.4334 286.121C33.2107 286.246 33.0232 286.418 32.8709 286.637C32.7224 286.852 32.6111 287.1 32.5369 287.381C32.4627 287.658 32.4255 287.953 32.4255 288.266ZM41.1295 290.727C41.3873 290.727 41.6256 290.674 41.8444 290.568C42.0631 290.463 42.2428 290.318 42.3834 290.135C42.5241 289.947 42.6041 289.734 42.6237 289.496H43.6549C43.6354 289.871 43.5084 290.221 43.2741 290.545C43.0436 290.865 42.7409 291.125 42.3659 291.324C41.9909 291.52 41.5788 291.617 41.1295 291.617C40.653 291.617 40.237 291.533 39.8815 291.365C39.5299 291.197 39.237 290.967 39.0026 290.674C38.7721 290.381 38.5983 290.045 38.4811 289.666C38.3678 289.283 38.3112 288.879 38.3112 288.453V288.207C38.3112 287.781 38.3678 287.379 38.4811 287C38.5983 286.617 38.7721 286.279 39.0026 285.986C39.237 285.693 39.5299 285.463 39.8815 285.295C40.237 285.127 40.653 285.043 41.1295 285.043C41.6256 285.043 42.0592 285.145 42.4303 285.348C42.8014 285.547 43.0924 285.82 43.3034 286.168C43.5182 286.512 43.6354 286.902 43.6549 287.34H42.6237C42.6041 287.078 42.5299 286.842 42.401 286.631C42.276 286.42 42.1041 286.252 41.8854 286.127C41.6705 285.998 41.4186 285.934 41.1295 285.934C40.7975 285.934 40.5182 286 40.2916 286.133C40.069 286.262 39.8913 286.438 39.7584 286.66C39.6295 286.879 39.5358 287.123 39.4772 287.393C39.4225 287.658 39.3952 287.93 39.3952 288.207V288.453C39.3952 288.73 39.4225 289.004 39.4772 289.273C39.5319 289.543 39.6237 289.787 39.7526 290.006C39.8854 290.225 40.0631 290.4 40.2858 290.533C40.5123 290.662 40.7936 290.727 41.1295 290.727ZM47.5308 290.727C47.7886 290.727 48.0269 290.674 48.2456 290.568C48.4644 290.463 48.6441 290.318 48.7847 290.135C48.9253 289.947 49.0054 289.734 49.0249 289.496H50.0562C50.0366 289.871 49.9097 290.221 49.6753 290.545C49.4448 290.865 49.1421 291.125 48.7671 291.324C48.3921 291.52 47.98 291.617 47.5308 291.617C47.0542 291.617 46.6382 291.533 46.2827 291.365C45.9312 291.197 45.6382 290.967 45.4038 290.674C45.1734 290.381 44.9995 290.045 44.8823 289.666C44.7691 289.283 44.7124 288.879 44.7124 288.453V288.207C44.7124 287.781 44.7691 287.379 44.8823 287C44.9995 286.617 45.1734 286.279 45.4038 285.986C45.6382 285.693 45.9312 285.463 46.2827 285.295C46.6382 285.127 47.0542 285.043 47.5308 285.043C48.0269 285.043 48.4605 285.145 48.8316 285.348C49.2027 285.547 49.4937 285.82 49.7046 286.168C49.9195 286.512 50.0366 286.902 50.0562 287.34H49.0249C49.0054 287.078 48.9312 286.842 48.8023 286.631C48.6773 286.42 48.5054 286.252 48.2866 286.127C48.0718 285.998 47.8198 285.934 47.5308 285.934C47.1987 285.934 46.9195 286 46.6929 286.133C46.4702 286.262 46.2925 286.438 46.1597 286.66C46.0308 286.879 45.937 287.123 45.8784 287.393C45.8237 287.658 45.7964 287.93 45.7964 288.207V288.453C45.7964 288.73 45.8237 289.004 45.8784 289.273C45.9331 289.543 46.0249 289.787 46.1538 290.006C46.2866 290.225 46.4644 290.4 46.687 290.533C46.9136 290.662 47.1948 290.727 47.5308 290.727ZM55.2738 290.035V285.16H56.3637V291.5H55.3266L55.2738 290.035ZM55.4789 288.699L55.9301 288.688C55.9301 289.109 55.8852 289.5 55.7953 289.859C55.7094 290.215 55.5688 290.523 55.3734 290.785C55.1781 291.047 54.9223 291.252 54.6059 291.4C54.2895 291.545 53.9047 291.617 53.4516 291.617C53.143 291.617 52.8598 291.572 52.602 291.482C52.348 291.393 52.1293 291.254 51.9457 291.066C51.7621 290.879 51.6195 290.635 51.518 290.334C51.4203 290.033 51.3715 289.672 51.3715 289.25V285.16H52.4555V289.262C52.4555 289.547 52.4867 289.783 52.5492 289.971C52.6156 290.154 52.7035 290.301 52.8129 290.41C52.9262 290.516 53.0512 290.59 53.1879 290.633C53.3285 290.676 53.473 290.697 53.6215 290.697C54.0824 290.697 54.4477 290.609 54.7172 290.434C54.9867 290.254 55.1801 290.014 55.2973 289.713C55.4184 289.408 55.4789 289.07 55.4789 288.699ZM59.22 286.379V293.938H58.1302V285.16H59.1263L59.22 286.379ZM63.4915 288.277V288.4C63.4915 288.861 63.4368 289.289 63.3274 289.684C63.218 290.074 63.0579 290.414 62.847 290.703C62.6399 290.992 62.3841 291.217 62.0794 291.377C61.7747 291.537 61.4251 291.617 61.0305 291.617C60.6282 291.617 60.2727 291.551 59.9641 291.418C59.6555 291.285 59.3938 291.092 59.179 290.838C58.9641 290.584 58.7923 290.279 58.6634 289.924C58.5384 289.568 58.4524 289.168 58.4055 288.723V288.066C58.4524 287.598 58.5403 287.178 58.6692 286.807C58.7981 286.436 58.968 286.119 59.179 285.857C59.3938 285.592 59.6536 285.391 59.9583 285.254C60.263 285.113 60.6145 285.043 61.013 285.043C61.4114 285.043 61.7649 285.121 62.0735 285.277C62.3821 285.43 62.6419 285.648 62.8528 285.934C63.0638 286.219 63.222 286.561 63.3274 286.959C63.4368 287.354 63.4915 287.793 63.4915 288.277ZM62.4016 288.4V288.277C62.4016 287.961 62.3684 287.664 62.302 287.387C62.2356 287.105 62.1321 286.859 61.9915 286.648C61.8548 286.434 61.679 286.266 61.4641 286.145C61.2493 286.02 60.9934 285.957 60.6966 285.957C60.4231 285.957 60.1848 286.004 59.9817 286.098C59.7825 286.191 59.6126 286.318 59.472 286.479C59.3313 286.635 59.2161 286.814 59.1263 287.018C59.0403 287.217 58.9759 287.424 58.9329 287.639V289.156C59.011 289.43 59.1204 289.688 59.261 289.93C59.4016 290.168 59.5891 290.361 59.8235 290.51C60.0579 290.654 60.3528 290.727 60.7083 290.727C61.0013 290.727 61.2532 290.666 61.4641 290.545C61.679 290.42 61.8548 290.25 61.9915 290.035C62.1321 289.82 62.2356 289.574 62.302 289.297C62.3684 289.016 62.4016 288.717 62.4016 288.4ZM66.172 285.16V291.5H65.0822V285.16H66.172ZM65.0002 283.479C65.0002 283.303 65.0529 283.154 65.1584 283.033C65.2677 282.912 65.4279 282.852 65.6388 282.852C65.8459 282.852 66.0041 282.912 66.1134 283.033C66.2267 283.154 66.2834 283.303 66.2834 283.479C66.2834 283.646 66.2267 283.791 66.1134 283.912C66.0041 284.029 65.8459 284.088 65.6388 284.088C65.4279 284.088 65.2677 284.029 65.1584 283.912C65.0529 283.791 65.0002 283.646 65.0002 283.479ZM70.6631 291.617C70.2217 291.617 69.8213 291.543 69.462 291.395C69.1065 291.242 68.7998 291.029 68.542 290.756C68.2881 290.482 68.0928 290.158 67.9561 289.783C67.8194 289.408 67.751 288.998 67.751 288.553V288.307C67.751 287.791 67.8272 287.332 67.9795 286.93C68.1319 286.523 68.3389 286.18 68.6006 285.898C68.8623 285.617 69.1592 285.404 69.4912 285.26C69.8233 285.115 70.167 285.043 70.5225 285.043C70.9756 285.043 71.3662 285.121 71.6944 285.277C72.0264 285.434 72.2979 285.652 72.5088 285.934C72.7198 286.211 72.876 286.539 72.9776 286.918C73.0791 287.293 73.1299 287.703 73.1299 288.148V288.635H68.3955V287.75H72.0459V287.668C72.0303 287.387 71.9717 287.113 71.8702 286.848C71.7725 286.582 71.6162 286.363 71.4014 286.191C71.1866 286.02 70.8936 285.934 70.5225 285.934C70.2764 285.934 70.0498 285.986 69.8428 286.092C69.6358 286.193 69.458 286.346 69.3096 286.549C69.1612 286.752 69.0459 287 68.9639 287.293C68.8819 287.586 68.8409 287.924 68.8409 288.307V288.553C68.8409 288.854 68.8819 289.137 68.9639 289.402C69.0498 289.664 69.1729 289.895 69.333 290.094C69.4971 290.293 69.6944 290.449 69.9248 290.562C70.1592 290.676 70.4248 290.732 70.7217 290.732C71.1045 290.732 71.4287 290.654 71.6944 290.498C71.96 290.342 72.1924 290.133 72.3916 289.871L73.0479 290.393C72.9112 290.6 72.7373 290.797 72.5264 290.984C72.3155 291.172 72.0557 291.324 71.7471 291.441C71.4424 291.559 71.0811 291.617 70.6631 291.617ZM78.5116 290.27V282.5H79.6015V291.5H78.6054L78.5116 290.27ZM74.246 288.4V288.277C74.246 287.793 74.3046 287.354 74.4218 286.959C74.5429 286.561 74.7128 286.219 74.9316 285.934C75.1542 285.648 75.4179 285.43 75.7226 285.277C76.0312 285.121 76.3749 285.043 76.7538 285.043C77.1523 285.043 77.4999 285.113 77.7968 285.254C78.0976 285.391 78.3515 285.592 78.5585 285.857C78.7695 286.119 78.9355 286.436 79.0566 286.807C79.1777 287.178 79.2616 287.598 79.3085 288.066V288.605C79.2655 289.07 79.1816 289.488 79.0566 289.859C78.9355 290.23 78.7695 290.547 78.5585 290.809C78.3515 291.07 78.0976 291.271 77.7968 291.412C77.496 291.549 77.1445 291.617 76.7421 291.617C76.371 291.617 76.0312 291.537 75.7226 291.377C75.4179 291.217 75.1542 290.992 74.9316 290.703C74.7128 290.414 74.5429 290.074 74.4218 289.684C74.3046 289.289 74.246 288.861 74.246 288.4ZM75.3359 288.277V288.4C75.3359 288.717 75.3671 289.014 75.4296 289.291C75.496 289.568 75.5976 289.812 75.7343 290.023C75.871 290.234 76.0448 290.4 76.2558 290.521C76.4667 290.639 76.7187 290.697 77.0116 290.697C77.371 290.697 77.6659 290.621 77.8964 290.469C78.1308 290.316 78.3183 290.115 78.4589 289.865C78.5995 289.615 78.7089 289.344 78.787 289.051V287.639C78.7402 287.424 78.6718 287.217 78.582 287.018C78.496 286.814 78.3827 286.635 78.2421 286.479C78.1054 286.318 77.9355 286.191 77.7323 286.098C77.5331 286.004 77.2968 285.957 77.0234 285.957C76.7265 285.957 76.4706 286.02 76.2558 286.145C76.0448 286.266 75.871 286.434 75.7343 286.648C75.5976 286.859 75.496 287.105 75.4296 287.387C75.3671 287.664 75.3359 287.961 75.3359 288.277Z" fill="black"/>
            <path d="M65.5 238.25C65.5 238.25 64.25 239.5 62.75 239.5C61.25 239.5 42.5001 238.5 41.5 238C40.5 237.5 40.2501 235.5 40.75 234.5C41.25 233.5 43.7501 232.25 44.75 231.25C45.75 230.25 49.7501 223 49.75 221C49.75 219 45.5001 195 45.25 190C45 185 45.7501 178.25 45.75 176.75C45.75 175.25 43.75 162.5 42.75 154.5C41.75 146.5 41.7501 135 42.75 127C43.75 119 47.2501 111.75 47.25 107.75C47.25 103.75 47 90.25 47 90.25C47 90.25 41.25 98.5 40.5 100.5C39.5 102.5 38.5 105.75 36.5 109C34.5 112.25 27 122.25 26.75 123C26.5 123.75 26.75 128.25 26.5 129.75C26.25 131.25 25 133 25 133.75C25 134.5 25.25 137.75 25.5 139.25C25.75 140.75 25.5 142.25 24.75 143.25C24 144.25 22 146.75 19.75 147.25C17.5 147.75 16 146.25 15.5 145.5C15 144.75 14.5 136.75 14.5 136.75C14.5 136.75 12.75 138.5 12.25 139.5C11.75 140.5 11.25 145 10.25 146.25C9.25 147.5 8 147.75 7.25 147.75C6.5 147.75 5.5 146.75 5.5 146.75C5.5 146.75 6.25 139.75 6.75 137.75C7.25 135.75 10.25 130.25 10.25 130.25M65.5 238.25C65.5 238.25 66.75 239.5 68.25 239.5C69.75 239.5 88.4999 238.5 89.5 238C90.5 237.5 90.7499 235.5 90.25 234.5C89.75 233.5 87.2499 232.25 86.25 231.25C85.25 230.25 81.2499 223 81.25 221C81.25 219 85.4999 195 85.75 190C86 185 85.2499 178.25 85.25 176.75C85.25 175.25 87.25 162.5 88.25 154.5C89.25 146.5 89.2499 135 88.25 127C87.25 119 83.7499 111.75 83.75 107.75C83.75 103.75 84 90.25 84 90.25C84 90.25 89.5 98.5 90.5 100.5C91.5 102.5 92.5 105.75 94.5 109C96.5 112.25 104 122.25 104.25 123C104.5 123.75 104.25 128.25 104.5 129.75C104.75 131.25 106 133 106 133.75C106 134.5 105.75 137.75 105.5 139.25C105.25 140.75 105.5 142.25 106.25 143.25C107 144.25 109 146.75 111.25 147.25C113.5 147.75 115 146.25 115.5 145.5C116 144.75 116.5 136.75 116.5 136.75C116.5 136.75 118.25 138.5 118.75 139.5C119.25 140.5 119.75 145 120.75 146.25C121.75 147.5 123 147.75 123.75 147.75C124.5 147.75 125.5 146.75 125.5 146.75C125.5 146.75 124.75 139.75 124.25 137.75C123.75 135.75 120.75 130.25 120.75 130.25M65.5 238.25V225.25M65.5 225.25C65.5 221.25 66.5 216.75 66.5 207.25C66.5 197.75 65.5 191.25 65.5 187.25M65.5 225.25C65.5 221.25 64.5 216.75 64.5 207.25C64.5 197.75 65.5 191.25 65.5 187.25M65.5 187.25V155.25M65.5 155.25C65.5 139.25 67.5 136 67.5 136C67.5 136 66.5 136.25 65.5 136.25C64.5 136.25 63.5 136 63.5 136C63.5 136 65.5 139.25 65.5 155.25ZM120.75 130.25C120.75 130.25 117.25 130.25 115 129.25C112.75 128.25 112 125.25 112 125.25M120.75 130.25C120.75 130.25 122.5 132.5 125 133.75C127.5 135 130 133.25 130 132.5C130 131.75 128 129.75 126.75 128.75C125.5 127.75 124.75 126.75 123.75 125.75C122.75 124.75 122.25 123.25 121 121.5C119.75 119.75 114.5 117 114 116.25C113.5 115.5 109.5 104.5 108 101.75C106.5 99 104.25 96 103 93.75C101.75 91.5 99.4999 83.5 98.75 80.5C98 77.5 97.75 72 93.5 67.75C89.25 63.5 83.25 64 81.75 63.5C80.25 63 74.25 60.5 74.25 58.5V52.9584M46.167 25.5109C43.5608 25.6823 41.5 27.8505 41.5 30.5V31.5C41.5 35.0528 43.816 38.0647 47.0206 39.1084M46.167 25.5109L46.5 35.5C46.5 36.6177 46.6807 37.838 47.0206 39.1084M46.167 25.5109L46 20.5C46 9.73045 54.7304 1 65.5 1C76.2696 1 85 9.73045 85 20.5L84.833 25.5109M47.0206 39.1084C48.3242 43.9798 51.9697 49.5865 56.75 52.9584M84.833 25.5109C87.4391 25.6823 89.5 27.8505 89.5 30.5V31.5C89.5 35.0528 87.184 38.0647 83.9794 39.1084M84.833 25.5109L84.5 35.5C84.5 36.6177 84.3193 37.838 83.9794 39.1084M83.9794 39.1084C82.6759 43.9798 79.0303 49.5865 74.25 52.9584M56.75 52.9584C59.3886 54.8197 62.373 56 65.5 56C68.627 56 71.6114 54.8197 74.25 52.9584M56.75 52.9584C56.75 54.066 56.75 56.9128 56.75 58.5C56.75 60.5 50.75 63 49.25 63.5C47.75 64 41.75 63.5 37.5 67.75C33.25 72 33 77.5 32.25 80.5C31.5001 83.5 29.25 91.5 28 93.75C26.75 96 24.5 99 23 101.75C21.5 104.5 17.5 115.5 17 116.25C16.5 117 11.25 119.75 10 121.5C8.75 123.25 8.25 124.75 7.25 125.75C6.25 126.75 5.5 127.75 4.25 128.75C3 129.75 1 131.75 1 132.5C1 133.25 3.5 135 6 133.75C8.5 132.5 10.25 130.25 10.25 130.25M52.5 28C52.5 28 56.25 26.25 58 26.5C59.75 26.75 62 29.5 62 29.5M78.5 28C78.5 28 74.75 26.25 73 26.5C71.25 26.75 69 29.5 69 29.5M10.25 130.25C10.25 130.25 13.75 130.25 16 129.25C18.25 128.25 19 125.25 19 125.25M59.5 44.75C59.5 44.75 62.5 47 65.5 47C68.5 47 71.5 44.75 71.5 44.75C71.5 44.75 67.5 44.25 65.5 44.25C63.5 44.25 59.5 44.75 59.5 44.75ZM60 29C60 30.3807 58.8807 31.5 57.5 31.5C56.1193 31.5 55 30.3807 55 29C55 27.6193 56.1193 26.5 57.5 26.5C58.8807 26.5 60 27.6193 60 29ZM76 29C76 30.3807 74.8807 31.5 73.5 31.5C72.1193 31.5 71 30.3807 71 29C71 27.6193 72.1193 26.5 73.5 26.5C74.8807 26.5 76 27.6193 76 29Z" stroke="black" strokeLinecap="round" strokeLinejoin="round"/>
            <path d="M7.16406 116.084V117.004H2.89844V116.084H7.16406ZM3.12109 108.473V117.004H1.99023V108.473H3.12109Z" fill="black"/>
            <path d="M122.99 108.473H125.814C126.455 108.473 126.996 108.57 127.438 108.766C127.883 108.961 128.221 109.25 128.451 109.633C128.686 110.012 128.803 110.479 128.803 111.033C128.803 111.424 128.723 111.781 128.562 112.105C128.406 112.426 128.18 112.699 127.883 112.926C127.59 113.148 127.238 113.314 126.828 113.424L126.512 113.547H123.857L123.846 112.627H125.85C126.256 112.627 126.594 112.557 126.863 112.416C127.133 112.271 127.336 112.078 127.473 111.836C127.609 111.594 127.678 111.326 127.678 111.033C127.678 110.705 127.613 110.418 127.484 110.172C127.355 109.926 127.152 109.736 126.875 109.604C126.602 109.467 126.248 109.398 125.814 109.398H124.121V117.004H122.99V108.473ZM127.977 117.004L125.902 113.137L127.08 113.131L129.184 116.934V117.004H127.977Z" fill="black"/>
        </svg>
        </div>
        <div className='Human_highlight'>
        <svg
            className='head' // must have space i-between classNames
            xmlns="http://www.w3.org/2000/svg"
            width="56.594"
            height="60"
            viewBox="0 0 56.594 60"
        >
            <path
            d="M24.5 1C35.2696 1 44 9.73045 44 20.5L43.833 25.5109C46.4391 25.6823 48.5 27.8505 48.5 30.5V31.5C48.5 35.0528 46.184 38.0647 42.9794 39.1084C41.6758 43.9798 38.0303 49.5865 33.25 52.9584C30.6114 54.8197 27.627 56 24.5 56C21.373 56 18.3886 54.8197 15.75 52.9584C10.9697 49.5865 7.32415 43.9798 6.0206 39.1084C2.81599 38.0647 0.5 35.0528 0.5 31.5V30.5C0.5 27.8505 2.56085 25.6823 5.16703 25.5109L5 20.5C5 9.73045 13.7304 1 24.5 1Z"
            fill={colorGradient(data['data']['head'])}
            stroke="white"
            strokeLinecap="round"
            strokeLinejoin="round"
            />
        </svg>
        <svg
            className='l_arm'
            xmlns="http://www.w3.org/2000/svg"
            width="40"
            height="100"
            viewBox="0 0 40 100"
        >
            <path
            d="M33.25 0.5C31.75 1 25.75 0.5 21.5 4.75C17.25 9 17 14.5 16.25 17.5C15.5001 20.5 13.25 28.5 12 30.75C10.75 33 8.5 36 7 38.75C5.5 41.5 1.5 52.5 1 53.25L10.75 60C11 59.25 18.5 49.25 20.5 46C22.5 42.75 23.5 39.5 24.5 37.5C25.5 35.5 31 27.25 31 27.25L33.25 0.5Z"
            fill={colorGradient(data['data']['l_arm'])}
            stroke="white"
            strokeLinecap="round"
            strokeLinejoin="round"
            />
        </svg>
        <svg
            className="r_arm"
            xmlns="http://www.w3.org/2000/svg"
            width="40"
            height="100"
            viewBox="0 0 40 100"
        >
            <path
            d="M0.75 0.5C2.25 1 8.24999 0.5 12.5 4.75C16.75 9 17 14.5 17.75 17.5C18.5 20.5 20.75 28.5 22 30.75C23.25 33 25.5 36 27 38.75C28.5 41.5 32.5 52.5 33 53.25L23.25 60C23 59.25 15.5 49.25 13.5 46C11.5 42.75 10.5 39.5 9.50002 37.5C8.50002 35.5 3 27.25 3 27.25L0.75 0.5Z"
            fill={colorGradient(data['data']['r_arm'])}
            stroke="white"
            strokeLinecap="round"
            strokeLinejoin="round"
            />
        </svg>
        <svg
            className="l_hand"
            xmlns="http://www.w3.org/2000/svg"
            width="40"
            height="40"
            viewBox="0 0 40 40"
        >
            <path
            d="M26.5 14.75C26.75 13.25 26.5 8.75 26.75 8L17 1.25C16.5 2 11.25 4.75 10 6.5C8.75 8.25 8.25 9.75 7.25 10.75C6.25 11.75 5.5 12.75 4.25 13.75C3 14.75 1 16.75 1 17.5C1 18.25 3.5 20 6 18.75C8.5 17.5 10.25 15.25 10.25 15.25C10.25 15.25 7.25 20.75 6.75 22.75C6.25 24.75 5.5 31.75 5.5 31.75C5.5 31.75 6.5 32.75 7.25 32.75C8 32.75 9.25 32.5 10.25 31.25C11.25 30 11.75 25.5 12.25 24.5C12.75 23.5 14.5 21.75 14.5 21.75C14.5 21.75 15 29.75 15.5 30.5C16 31.25 17.5 32.75 19.75 32.25C22 31.75 24 29.25 24.75 28.25C25.5 27.25 25.75 25.75 25.5 24.25C25.25 22.75 25 19.5 25 18.75C25 18 26.25 16.25 26.5 14.75Z"
            fill={colorGradient(data['data']['l_hand'])}
            stroke="white"
            strokeLinecap="round"
            strokeLinejoin="round"
            />
        </svg>
        <svg
            className="r_hand"
            xmlns="http://www.w3.org/2000/svg"
            width="40"
            height="40"
            viewBox="0 0 40 40"
        >
            <path
            d="M1.5 14.75C1.25 13.25 1.5 8.75 1.25 8L11 1.25C11.5 2 16.75 4.75 18 6.5C19.25 8.25 19.75 9.75 20.75 10.75C21.75 11.75 22.5 12.75 23.75 13.75C25 14.75 27 16.75 27 17.5C27 18.25 24.5 20 22 18.75C19.5 17.5 17.75 15.25 17.75 15.25C17.75 15.25 20.75 20.75 21.25 22.75C21.75 24.75 22.5 31.75 22.5 31.75C22.5 31.75 21.5 32.75 20.75 32.75C20 32.75 18.75 32.5 17.75 31.25C16.75 30 16.25 25.5 15.75 24.5C15.25 23.5 13.5 21.75 13.5 21.75C13.5 21.75 13 29.75 12.5 30.5C12 31.25 10.5 32.75 8.25 32.25C6 31.75 4 29.25 3.25 28.25C2.5 27.25 2.25 25.75 2.5 24.25C2.75 22.75 3 19.5 3 18.75C3 18 1.75 16.25 1.5 14.75Z"
            fill={colorGradient(data['data']['r_hand'])}
            stroke="white"
            strokeLinecap="round"
            strokeLinejoin="round"
        />
        </svg>
        <svg
            className="facial_expression"
            xmlns="http://www.w3.org/2000/svg"
            width="35"
            height="60"
            viewBox="0 0 35 60"
        >
            <path
            d="M16.5 0.5C25.8888 0.5 32.5 8.11116 32.5 17.5L32.3544 21.8685L32.0641 30.5769C32.0641 31.5513 31.9066 32.6152 31.6102 33.7227C30.4738 37.9696 28.2956 41.8575 24.1282 44.7971C21.8279 46.4197 19.2261 47.4487 16.5 47.4487C13.7739 47.4487 11.1721 46.4197 8.87182 44.7971C4.70436 41.8575 2.52618 37.9696 1.38975 33.7227C1.0934 32.6152 0.935897 31.5513 0.935897 30.5769L0.645616 21.8685L0.5 17.5C0.5 8.11116 7.11116 0.5 16.5 0.5Z"
            fill={colorGradient(data['data']['facial_expression'])}
            stroke="white"
            strokeLinecap="round"
            strokeLinejoin="round"
            />
        </svg>
        <svg
            className="eyes"
            xmlns="http://www.w3.org/2000/svg"
            width="30"
            height="10"
            viewBox="0 0 30 10"
        >
            <path
            d="M7 1.49986C5.25 1.24986 0.5 3.49986 0.5 3.49986C0.5 3.49986 3.53086 7.34345 5.5 7.99983C8.5 8.99983 12 5.49986 12 5.49986C12 5.49986 8.75 1.74986 7 1.49986Z M22 1.49986C23.75 1.24986 28.5 3.49986 28.5 3.49986C28.5 3.49986 25.4691 7.34345 23.5 7.99983C20.5 8.99983 17 5.49986 17 5.49986C17 5.49986 20.25 1.74986 22 1.49986Z"
            fill={colorGradient(data['data']['eyes'])}
            stroke="white"
            strokeLinecap="round"
            strokeLinejoin="round"
            />
        </svg>
        <svg
            className="voice"
            xmlns="http://www.w3.org/2000/svg"
            width="20"
            height="10"
            viewBox="0 0 20 10"
        >
            <path
            d="M8.5 5C5.5 5 0.5 1.25 0.5 1.25C0.5 1.25 6.5 0.499996 8.5 0.499996C10.5 0.499996 16.5 1.25 16.5 1.25C16.5 1.25 11.5 5 8.5 5Z"
            fill={colorGradient(data['data']['voice'])}
            stroke="white"
            strokeLinecap="round"
            strokeLinejoin="round"
            />
        </svg>
        <svg
            className="legs"
            xmlns="http://www.w3.org/2000/svg"
            width="60"
            height="120"
            viewBox="0 0 60 120"
        >
            <path
            d="M1.74998 28.5C0.749977 20.5 0.75003 8.99999 1.75 0.999992L22.5 9.99999C22.5 9.99999 24.5 13.25 24.5 29.25V61.25C24.5 62.8241 24.3451 64.7854 24.1573 67.1643C23.8678 70.8305 23.5 75.4885 23.5 81.25C23.5 87.0115 23.8678 90.9339 24.1573 94.0211C24.1888 94.3568 24.2193 94.6827 24.2484 95H8.75C8.74999 94.1343 7.95379 89.1472 7.03036 83.363C5.82032 75.7837 4.39181 66.8358 4.25 64C4.07414 60.4831 4.39305 56.1005 4.59771 53.2879C4.68402 52.1018 4.75001 51.1949 4.75 50.75C4.74999 49.926 4.14652 45.7076 3.43682 40.7466C2.85451 36.6761 2.20068 32.1056 1.74998 28.5Z M47.2499 0.999992C48.2499 8.99999 48.25 20.5 47.25 28.5C46.7993 32.1056 46.1454 36.6761 45.5631 40.7466C44.8534 45.7076 44.25 49.926 44.2499 50.75C44.2499 51.1949 44.3159 52.1018 44.4022 53.2879C44.6069 56.1005 44.9258 60.4831 44.7499 64C44.6081 66.8358 43.1796 75.7837 41.9696 83.363C41.0462 89.1472 40.25 94.1343 40.2499 95H24.7516C24.7806 94.6827 24.8112 94.3568 24.8427 94.0211C25.1322 90.9339 25.5 87.0115 25.5 81.25C25.5 75.4885 25.1322 70.8305 24.8427 67.1643C24.6548 64.7854 24.5 62.8241 24.5 61.25V29.25C24.5 13.25 26.5 9.99999 26.5 9.99999L47.2499 0.999992Z"
            fill={colorGradient(data['data']['legs'])}
            stroke="white"
            strokeLinecap="round"
            strokeLinejoin="round"
            />
        </svg>
        <svg
            className="feet"
            xmlns="http://www.w3.org/2000/svg"
            width="50"
            height="40"
            viewBox="0 0 50 40"
        >
            <path
            d="M25.2484 1H9.74999C9.75002 3 5.74997 10.25 4.74999 11.25C4.34033 11.6597 3.67889 12.1113 3.00635 12.5705C2.03727 13.2322 1.04514 13.9097 0.749994 14.5C0.250021 15.5 0.499967 17.5 1.49999 18C2.50002 18.5 21.2499 19.5 22.75 19.5C24.25 19.5 25.5 18.25 25.5 18.25V5.25C25.5 3.93971 25.3927 2.57577 25.2484 1Z M41.2499 1H25.7516C25.6073 2.57577 25.5 3.93971 25.5 5.25V18.25C25.5 18.25 26.7499 19.5 28.25 19.5C29.75 19.5 48.4999 18.5 49.4999 18C50.5 17.5 50.7499 15.5 50.2499 14.5C49.9548 13.9097 48.9627 13.2322 47.9936 12.5705C47.321 12.1113 46.6596 11.6597 46.2499 11.25C45.25 10.25 41.2499 3 41.2499 1Z"
            fill={colorGradient(data['data']['feet'])}
            stroke="white"
            strokeLinecap="round"
            strokeLinejoin="round"
            />
        </svg>
        </div>
        </div>
    )
}

function colorGradient(fadeFraction, rgbColor1 = {red: 19, green: 233, blue: 19}, rgbColor2 = {red: 255, green: 255, blue: 0}, rgbColor3 = {red: 255, green: 0, blue: 0}) {
    var color1 = rgbColor1;
    var color2 = rgbColor2;
    var fade = fadeFraction;

    // Do we have 3 colors for the gradient? Need to adjust the params.
    if (rgbColor3) {
      fade = fade * 2;

      // Find which interval to use and adjust the fade percentage
      if (fade >= 1) {
        fade -= 1;
        color1 = rgbColor2;
        color2 = rgbColor3;
      }
    }

    var diffRed = color2.red - color1.red;
    var diffGreen = color2.green - color1.green;
    var diffBlue = color2.blue - color1.blue;

    var gradient = {
      red: parseInt(Math.floor(color1.red + (diffRed * fade)), 10),
      green: parseInt(Math.floor(color1.green + (diffGreen * fade)), 10),
      blue: parseInt(Math.floor(color1.blue + (diffBlue * fade)), 10),
    };

    return 'rgb(' + gradient.red + ',' + gradient.green + ',' + gradient.blue + ')';
}

const COLORS = ['#8889DD', '#9597E4', '#8DC77B', '#A5D297', '#E2CF45', '#F8C12D'];

class CustomizedContent extends PureComponent {
  render() {
    const { root, depth, x, y, width, height, index, payload, colors, rank, name } = this.props;

    return (
      <g>
        <rect
          x={x}
          y={y}
          width={width}
          height={height}
          style={{
            fill: depth < 2 ? colors[Math.floor((index / root.children.length) * 6)] : 'transparent',
            stroke: '#fff',
            strokeWidth: 2 / (depth + 1e-10),
            strokeOpacity: 1 / (depth + 1e-10),
          }}
        />
        {depth === 1 ? (
          <text x={x + width / 2} y={y + height / 2 + 7} textAnchor="middle" fill="#fff" fontSize={14}>
            {name}
          </text>
        ) : null}
        {depth === 1 ? (
          <text x={x + 4} y={y + 18} fill="#fff" fontSize={16} fillOpacity={0.9}>
            {index + 1}
          </text>
        ) : null}
      </g>
    );
  }
}

const CustomTooltip = ({ active, payload, label }) => {
  
    if (active && payload && payload.length) {
      return (
        <div className="treemap-custom-tooltip">
          <p>{`${payload[0].payload.root.name}`}</p>
          <p>{`${payload[0].payload.name} : ${payload[0].value}`}</p>
        </div>
      );
    }
  
    return null;
};

const SingleConverter = (imageList, category, subcategory) => {
    var obj = {};
    for (var i=0; i < imageList.length; i++) {
        obj[imageList[i][1][category][subcategory]] = (obj[imageList[i][1][category][subcategory]] || 0 ) +1;
    }
    var list = [];
    for (const [key, value] of Object.entries(obj)) {
        list.push({name: key, value: value});
    }
    console.log(list);
    return list;
}

const NestedConverter = (imageList, parentData, category, parentcategory, subcategory, isArchi=false) => {
    if (isArchi) {
        for (var i=0; i < imageList.length; i++) {
            for (var j=0; j < parentData.length; j++) {
                if (imageList[i][1][category][subcategory] !== undefined) {
                    for (var l=0; l < imageList[i][1][category][parentcategory].length; l++) {
                        if (imageList[i][1][category][parentcategory][l] === parentData[j]['name']) {

                            for (var k=0; k < imageList[i][1][category][subcategory].length; k++){
                                if (imageList[i][1][category][subcategory][k] in parentData[j]) {
                                    parentData[j][imageList[i][1][category][subcategory][k]]++;
                                } else {
                                    parentData[j][imageList[i][1][category][subcategory][k]] = 1;
                                }
                            }
                        }
                    }
                }
            }
        }
        console.log(parentData);
        return parentData;
    }
    for (var i=0; i < imageList.length; i++) {
        for (var j=0; j < parentData.length; j++) {
            if (imageList[i][1][category][parentcategory] === parentData[j]['name']) {
                if (parentData[j][imageList[i][1][category][subcategory]] !== undefined) {
                    parentData[j][imageList[i][1][category][subcategory]]++;
                } else {
                    parentData[j][imageList[i][1][category][subcategory]] = 1;
                }
                break;
            }
        }
    }
    console.log(parentData);
    return parentData;
}

const ListConverter = (imageList, category, subcategory) => {
    var obj = {};
    if (category === 'posture') {
        for (var i=0; i < imageList.length; i++) {
            for (var j=0; j < imageList[i][1][category].length; j++) {
                obj[imageList[i][1][category][j]] = (obj[imageList[i][1][category][j]] || 0 ) +1;
            }
        }
    } else {
        for (var i=0; i < imageList.length; i++) {
            for (var j=0; j < imageList[i][1][category][subcategory].length; j++) {
                obj[imageList[i][1][category][subcategory][j]] = (obj[imageList[i][1][category][subcategory][j]] || 0 ) +1;
            }
        }
    }
    var list = [];
    for (const [key, value] of Object.entries(obj)) {
        list.push({name: key, value: value});
    }
    console.log(list);
    return list;
}

const UndefinedMarker = (data) => {
    for (var i=0; i < data.length; i++) {
        for (const [key, value] of Object.entries(data[i])) {
            if (key === '') {
                Object.defineProperty(data[i], 'unknown',
                    Object.getOwnPropertyDescriptor(data[i], ''));
                delete data[i][''];
            }
            if (value === '') {
                data[i][key] = 'unknown';
            }
        }
    }
    return data;
}

const JsonConverter = (data) => {
    for (var i=0; i < data.length; i++) {
        for (const [key, value] of Object.entries(data[i])) {
            if (key === 'value') {
                data[i]['size'] = data[i][key];
                delete data[i][key];
            }
            if (key !== 'name' && key !== 'value' && data[i]['children'] === undefined) {
                data[i]['children'] = [{name: key, size: data[i][key]}];
                delete data[i][key];
            } else if (key !== 'name' && key !== 'value') {
                data[i]['children'].push({name: key, size: data[i][key]});
                delete data[i][key];
            }
        }
        if (data[i]['children'] !== undefined) {
            console.log(data[i]['children'].length);
            var total = data[i]['size'];
            for (var j=0; j < data[i]['children'].length; j++) {
                total = total - data[i]['children'][j]['size'];
            }
            data[i]['children'].push({name: '', size: total});
            delete data[i]['size'];
        } else {
            data[i]['children'] = [{name: '', size: data[i]['size']}];
            delete data[i]['size'];
        }
    }
    console.log(data)
    return data;
}

const ModalityConverter = (imageList) => {
    var obj = {
        'head': 0,
        'l_arm': 0,
        'r_arm': 0,
        'l_hand': 0,
        'r_hand': 0,
        'facial_expression': 0,
        'eyes': 0,
        'voice': 0,
        'legs': 0,
        'feet': 0
    };
    for (var i=0; i < imageList.length; i++) {
        for (const [key, value] of Object.entries(obj)) {
            if (imageList[i][1]['modality'][key] === false) {
                obj[key]++;
            }
        }
    }
    for (const [key, value] of Object.entries(obj)) {
        obj[key] /= imageList.length;
    }
    console.log(obj);
    return obj;
}